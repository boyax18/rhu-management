<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Individual Health Record | RHU Management System</title>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <link rel="stylesheet" href="healthcheckadd.css" />

</head>

<body>
  <!-- Header -->
  <header class="header">
    <h1>Health Check Up Management System</h1>
  </header>

  <!-- Sidebar -->
  <div class="sidebar">
    <ul>
      <li><a href="homepage.html"><ion-icon name="home-outline"></ion-icon> Home</a></li>
      <li><a href="healthcheckdb.html"><ion-icon name="grid-outline"></ion-icon> Dashboard</a></li>
      <li><a href="#" class="active"><ion-icon name="person-add-outline"></ion-icon> Add Patient</a></li>
    </ul>
  </div>

  <!-- Main Content -->
  <main class="main">
    <section class="content">
      <legend>ðŸ“‹ Individual Treatment Record</legend>

      <form class="fillup_form">
        <!-- Basic Information -->
        <fieldset>
          <div class="checkbox-group">
            <label><input type="checkbox" name="NHTS"> NHTS</label>
            <label><input type="checkbox" name="4Ps"> 4Ps</label>
            <label><input type="checkbox" name="NonNHTS"> Non-NHTS</label>
            <label><input type="checkbox" name="PWD"> PWD</label>
          </div>

          <div class="form-grid">
            <div><label>NHTS HH No.:</label><input type="text" name="NHTS_HH_no" ></div>
            <div><label>Code No.:</label><input type="text" name="code_no"></div>
            <div><label>Family No.:</label><input type="text" name="family_no"></div>
            <div><label>NHTS Member/Head:</label><input type="text" name="NHTS_member_head"></div>
            <div><label>DOB (Head/Member):</label><input type="date" name="DOB_head"></div>
            <div><label>Relationship to Household Head:</label><input type="text" name="relationship_to_household_head"></div>
            <div>
              <label>PhilHealth Member:</label>
              <div class="radio-group">
                <label><input type="radio" name="PhilHealth_member" value="yes"> Yes</label>
                <label><input type="radio" name="PhilHealth_member" value="no"> No</label>
              </div>
            </div>
            <div><label>PhilHealth No.:</label><input type="text" name="PhilHealth_no"></div> 
            <div><label>Motherâ€™s Maiden Name (if Married):</label><input type="text" name="mother_maiden_name"></div>
          </div>
          <br>

          <div><label><b>Name:</b></label></div>
          <div class="form-grid">
            <div><label>First Name:</label><input type="text" name="first_name" required></div>
            <div><label>Middle Name:</label><input type="text" name="middle_name"></div>
            <div><label>Last Name:</label><input type="text" name="last_name" required></div>
            <div><label>Suffix:</label><input type="text" name="suffix"></div>
            <div><label>DOB:</label><input type="date" name="DOB" required></div>
            <div><label>Age:</label><input type="number" name="age" required></div>
            <div><label>Sex:</label><input type="text" name="sex" required></div>
            <div><label>Status:</label><input type="text" name="status" required></div>
          </div>
          <br>
          <div><label><b>Address:</b></label>
          <div class="form-grid">
            <div>
              <select id="province" required>
                <option value="" disabled selected hidden>Select Province</option>
              </select>
            </div>

            <div>
              <select id="municipality" required>
                <option value="" disabled selected hidden>Select Municipality / City</option>
              </select>
            </div>

            <div>   
              <select id="barangay" required>
                <option value="" disabled selected hidden>Select Barangay</option>
              </select>
            </div>
          </div>  
          
          <div class="form-grid">
            <div><label>Hx. of Allergies:</label><input type="text" name="hx_of_allergies"></div>
            <div><label>Blood Type:</label><input type="text" name="blood_type"></div>
            <div><label>Date:</label><input type="date" name="date_recorded" required></div>
            <div><label>BP:</label><input type="text" name="BP" placeholder="mmHg" required></div>
            <div><label>Temp:</label><input type="text" name="temp" placeholder="Â°C" required></div>
            <div><label>Weight:</label><input type="text" name="weight" placeholder="kg" required></div>
            <div><label>RR:</label><input type="number" name="RR" placeholder="cpm" required></div>
            <div><label>PR:</label><input type="number" name="PR" placeholder="bpm" required></div>
            <div><label>Height:</label><input type="text" name="height" placeholder="cm" required></div>
          </div>
        </fieldset>

        <button type="submit" class="submit-btn">Save Record</button>
      </form>
    </section>
  </main>
  <script>
document.addEventListener("DOMContentLoaded", () => {
    const provinceSelect = document.getElementById("province");
    const municipalitySelect = document.getElementById("municipality");
    const barangaySelect = document.getElementById("barangay");

    // Load provinces
    fetch("https://psgc.gitlab.io/api/provinces/")
        .then(res => res.json())
        .then(data => {
            // Sort alphabetically by name
            data.sort((a, b) => a.name.localeCompare(b.name));

            provinceSelect.innerHTML = '<option disabled selected>Select Province</option>';

            data.forEach(item => {
                let opt = document.createElement("option");
                opt.value = item.code;
                opt.textContent = item.name;
                provinceSelect.appendChild(opt);
            });
        });

    // On selecting Province â†’ load municipalities
    provinceSelect.addEventListener("change", () => {
        municipalitySelect.disabled = false;
        barangaySelect.disabled = true;

        municipalitySelect.innerHTML = '<option disabled selected>Loading...</option>';
        barangaySelect.innerHTML = '<option disabled selected>Select municipality first</option>';

        fetch(`https://psgc.gitlab.io/api/provinces/${provinceSelect.value}/cities-municipalities/`)
            .then(res => res.json())
            .then(data => {
                // Sort alphabetically
                data.sort((a, b) => a.name.localeCompare(b.name));

                municipalitySelect.innerHTML = '<option disabled selected>Select Municipality / City</option>';

                data.forEach(item => {
                    let opt = document.createElement("option");
                    opt.value = item.code;
                    opt.textContent = item.name;
                    municipalitySelect.appendChild(opt);
                });
            });
    });

    // On selecting Municipality â†’ load barangays
    municipalitySelect.addEventListener("change", () => {
        barangaySelect.disabled = false;
        barangaySelect.innerHTML = '<option disabled selected>Loading...</option>';

        fetch(`https://psgc.gitlab.io/api/cities-municipalities/${municipalitySelect.value}/barangays/`)
            .then(res => res.json())
            .then(data => {
                // Sort alphabetically
                data.sort((a, b) => a.name.localeCompare(b.name));

                barangaySelect.innerHTML = '<option disabled selected>Select Barangay</option>';

                data.forEach(item => {
                    let opt = document.createElement("option");
                    opt.value = item.name;
                    opt.textContent = item.name;
                    barangaySelect.appendChild(opt);
                });
            });
    });
});
</script>
</body>
</html>
